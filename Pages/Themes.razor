@page "/themes"
@inject IJSRuntime JS

<div class="page-header">
    <h1 class="page-title">Color Themes</h1>
    <p class="page-description">
        Choose a color scheme that fits your style. Click on any theme to apply it across the entire site.
    </p>
</div>

<section class="section">
    <h2 class="section-title">Choose Your Theme</h2>
    
    <div class="component-grid">
        @foreach (var theme in themes)
        {
            <div class="glass-card theme-preview-card @(currentTheme == theme.Key ? "active-theme" : "")" 
                 style="cursor: pointer;" 
                 @onclick="() => SetTheme(theme.Key)">
                <div class="theme-preview" style="background: linear-gradient(135deg, @theme.Value.Primary, @theme.Value.Accent);">
                    <div class="theme-preview-dots">
                        <span style="background: @theme.Value.Primary;"></span>
                        <span style="background: @theme.Value.Secondary;"></span>
                        <span style="background: @theme.Value.Accent;"></span>
                        <span style="background: @theme.Value.Accent2;"></span>
                    </div>
                </div>
                <div class="flex items-center justify-between mt-md">
                    <div>
                        <h4 style="margin: 0;">@theme.Value.Name</h4>
                        <p style="margin: 0; font-size: 0.875rem; color: var(--text-tertiary);">@theme.Value.Description</p>
                    </div>
                    @if (currentTheme == theme.Key)
                    {
                        <span class="badge badge-primary">Active</span>
                    }
                </div>
            </div>
        }
    </div>
</section>

<section class="section">
    <h2 class="section-title">Preview Components</h2>
    
    <div class="glass-card">
        <div class="glass-card-header">
            <h3 class="glass-card-title">Buttons</h3>
            <p class="glass-card-subtitle">See how the current theme affects components</p>
        </div>
        
        <div class="component-preview">
            <button class="btn btn-primary">Primary</button>
            <button class="btn btn-secondary">Secondary</button>
            <button class="btn btn-gradient">Gradient</button>
            <button class="btn btn-outline">Outline</button>
            <button class="btn btn-ghost">Ghost</button>
        </div>
    </div>
    
    <div class="glass-card mt-lg">
        <div class="glass-card-header">
            <h3 class="glass-card-title">Badges & Progress</h3>
        </div>
        
        <div class="component-preview" style="flex-direction: column; gap: var(--spacing-lg);">
            <div class="flex gap-md">
                <span class="badge badge-primary">Primary</span>
                <span class="badge badge-success">Success</span>
                <span class="badge badge-warning">Warning</span>
                <span class="badge badge-danger">Danger</span>
            </div>
            <div class="progress" style="width: 100%; max-width: 400px;">
                <div class="progress-bar" style="width: 65%;"></div>
            </div>
        </div>
    </div>
    
    <div class="glass-card mt-lg">
        <div class="glass-card-header">
            <h3 class="glass-card-title">Text & Gradients</h3>
        </div>
        
        <h2 class="text-gradient" style="margin-bottom: var(--spacing-md);">Gradient Text Example</h2>
        <p style="color: var(--text-secondary);">
            The theme colors apply to buttons, badges, progress bars, glows, and gradient text throughout the interface.
        </p>
    </div>
</section>

<section class="section">
    <h2 class="section-title">Usage</h2>
    
    <div class="glass-card">
        <p class="mb-md">Add a theme class to your <code>&lt;body&gt;</code> element:</p>
        
        <div class="code-block">
            <div class="code-header">
                <span class="code-language">HTML</span>
            </div>
            <div class="code-content"><code>&lt;body class="bg-orbs theme-purple-cyan"&gt;
    ...
&lt;/body&gt;

&lt;!-- Available themes: --&gt;
&lt;!-- theme-purple-cyan (default) --&gt;
&lt;!-- theme-ocean --&gt;
&lt;!-- theme-sunset --&gt;
&lt;!-- theme-forest --&gt;
&lt;!-- theme-rose --&gt;
&lt;!-- theme-amber --&gt;
&lt;!-- theme-mono --&gt;
&lt;!-- theme-crimson --&gt;</code></div>
        </div>
        
        <div class="alert alert-info mt-lg">
            <svg class="alert-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: var(--gradient-accent);">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <div class="alert-content">
                <div class="alert-title">Tip</div>
                <div class="alert-message">You can combine themes with any background style. Try <code>bg-aurora theme-sunset</code> for a warm look!</div>
            </div>
        </div>
    </div>
</section>

<style>
    .theme-preview {
        height: 80px;
        border-radius: var(--radius-lg);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
    }
    
    .theme-preview-dots {
        display: flex;
        gap: var(--spacing-sm);
    }
    
    .theme-preview-dots span {
        width: 32px;
        height: 32px;
        border-radius: var(--radius-full);
        border: 2px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
    
    .theme-preview-card.active-theme {
        border-color: var(--gradient-primary);
        box-shadow: 0 0 30px var(--glow-primary);
    }
</style>

@code {
    private string currentTheme = "theme-purple-cyan";
    
    private Dictionary<string, ThemeInfo> themes = new()
    {
        { "theme-purple-cyan", new ThemeInfo("Purple Cyan", "The classic GlassUI look", "#8b5cf6", "#d946ef", "#06b6d4", "#14b8a6") },
        { "theme-ocean", new ThemeInfo("Ocean", "Cool blues and teals", "#3b82f6", "#6366f1", "#0ea5e9", "#06b6d4") },
        { "theme-sunset", new ThemeInfo("Sunset", "Warm oranges and yellows", "#f97316", "#ef4444", "#eab308", "#f59e0b") },
        { "theme-forest", new ThemeInfo("Forest", "Natural greens", "#22c55e", "#10b981", "#84cc16", "#14b8a6") },
        { "theme-rose", new ThemeInfo("Rose", "Soft pinks and purples", "#ec4899", "#f43f5e", "#a855f7", "#d946ef") },
        { "theme-amber", new ThemeInfo("Amber", "Golden warmth", "#f59e0b", "#fbbf24", "#d97706", "#b45309") },
        { "theme-mono", new ThemeInfo("Mono", "Clean grayscale", "#a1a1aa", "#71717a", "#e4e4e7", "#d4d4d8") },
        { "theme-crimson", new ThemeInfo("Crimson", "Bold reds", "#dc2626", "#b91c1c", "#f87171", "#fca5a5") }
    };
    
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            // Get current theme from body class
            var bodyClass = await JS.InvokeAsync<string>("eval", "document.body.className");
            foreach (var theme in themes.Keys)
            {
                if (bodyClass.Contains(theme))
                {
                    currentTheme = theme;
                    StateHasChanged();
                    break;
                }
            }
        }
    }
    
    private async Task SetTheme(string themeClass)
    {
        currentTheme = themeClass;
        await JS.InvokeVoidAsync("setThemeClass", themeClass);
    }
    
    private class ThemeInfo
    {
        public string Name { get; set; }
        public string Description { get; set; }
        public string Primary { get; set; }
        public string Secondary { get; set; }
        public string Accent { get; set; }
        public string Accent2 { get; set; }
        
        public ThemeInfo(string name, string description, string primary, string secondary, string accent, string accent2)
        {
            Name = name;
            Description = description;
            Primary = primary;
            Secondary = secondary;
            Accent = accent;
            Accent2 = accent2;
        }
    }
}
