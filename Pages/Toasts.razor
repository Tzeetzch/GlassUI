@page "/toasts"
@inject IJSRuntime JS

<div class="page-header">
    <h1 class="page-title">Toasts</h1>
    <p class="page-description">
        Toast notification components for displaying brief, auto-dismissing messages.
    </p>
</div>

<section class="section">
    <h2 class="section-title">Toast Variants</h2>
    
    <div class="glass-card">
        <div class="glass-card-header">
            <h3 class="glass-card-title">Trigger Toasts</h3>
            <p class="glass-card-subtitle">Click the buttons to show different toast styles</p>
        </div>
        
        <div class="component-preview">
            <button class="btn btn-primary" @onclick='() => ShowToast("info")'>
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                Info Toast
            </button>
            
            <button class="btn btn-gradient" @onclick='() => ShowToast("success")'>
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                Success Toast
            </button>
            
            <button class="btn btn-secondary" @onclick='() => ShowToast("warning")'>
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                </svg>
                Warning Toast
            </button>
            
            <button class="btn btn-outline" style="border-color: #ef4444; color: #ef4444;" @onclick='() => ShowToast("error")'>
                <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                Error Toast
            </button>
        </div>
    </div>
</section>

<section class="section">
    <h2 class="section-title">Static Preview</h2>
    
    <div class="glass-card">
        <div class="glass-card-header">
            <h3 class="glass-card-title">All Toast Styles</h3>
            <p class="glass-card-subtitle">Visual reference for each toast variant</p>
        </div>
        
        <div style="display: flex; flex-direction: column; gap: var(--spacing-md); max-width: 400px;">
            <div class="toast toast-info">
                <div class="toast-icon">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
                <div class="toast-content">
                    <div class="toast-title">Information</div>
                    <div class="toast-message">This is an informational message.</div>
                </div>
                <button class="toast-close">×</button>
            </div>
            
            <div class="toast toast-success">
                <div class="toast-icon">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
                <div class="toast-content">
                    <div class="toast-title">Success!</div>
                    <div class="toast-message">Your changes have been saved.</div>
                </div>
                <button class="toast-close">×</button>
            </div>
            
            <div class="toast toast-warning">
                <div class="toast-icon">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                    </svg>
                </div>
                <div class="toast-content">
                    <div class="toast-title">Warning</div>
                    <div class="toast-message">Please review before continuing.</div>
                </div>
                <button class="toast-close">×</button>
            </div>
            
            <div class="toast toast-error">
                <div class="toast-icon">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
                <div class="toast-content">
                    <div class="toast-title">Error</div>
                    <div class="toast-message">Something went wrong. Please try again.</div>
                </div>
                <button class="toast-close">×</button>
            </div>
        </div>
        
        <div class="code-block mt-lg">
            <div class="code-header">
                <span class="code-language">HTML</span>
            </div>
            <div class="code-content"><code>&lt;div class="toast toast-success"&gt;
    &lt;div class="toast-icon"&gt;
        &lt;svg&gt;...&lt;/svg&gt;
    &lt;/div&gt;
    &lt;div class="toast-content"&gt;
        &lt;div class="toast-title"&gt;Success!&lt;/div&gt;
        &lt;div class="toast-message"&gt;Your changes have been saved.&lt;/div&gt;
    &lt;/div&gt;
    &lt;button class="toast-close"&gt;×&lt;/button&gt;
&lt;/div&gt;</code></div>
        </div>
    </div>
</section>

<section class="section">
    <h2 class="section-title">Toast with Actions</h2>
    
    <div class="glass-card">
        <div class="glass-card-header">
            <h3 class="glass-card-title">Actionable Toasts</h3>
            <p class="glass-card-subtitle">Toasts can include action buttons</p>
        </div>
        
        <div style="display: flex; flex-direction: column; gap: var(--spacing-md); max-width: 450px;">
            <div class="toast toast-info">
                <div class="toast-icon">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"/>
                    </svg>
                </div>
                <div class="toast-content">
                    <div class="toast-title">Update Available</div>
                    <div class="toast-message">A new version is ready to install.</div>
                    <div class="toast-actions">
                        <button class="btn btn-sm btn-primary">Update Now</button>
                        <button class="btn btn-sm btn-ghost">Later</button>
                    </div>
                </div>
                <button class="toast-close">×</button>
            </div>
            
            <div class="toast toast-warning">
                <div class="toast-icon">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                </div>
                <div class="toast-content">
                    <div class="toast-title">Item Deleted</div>
                    <div class="toast-message">The file has been moved to trash.</div>
                    <div class="toast-actions">
                        <button class="btn btn-sm btn-outline">Undo</button>
                    </div>
                </div>
                <button class="toast-close">×</button>
            </div>
        </div>
        
        <div class="code-block mt-lg">
            <div class="code-header">
                <span class="code-language">HTML</span>
            </div>
            <div class="code-content"><code>&lt;div class="toast toast-info"&gt;
    &lt;div class="toast-icon"&gt;...&lt;/div&gt;
    &lt;div class="toast-content"&gt;
        &lt;div class="toast-title"&gt;Update Available&lt;/div&gt;
        &lt;div class="toast-message"&gt;A new version is ready.&lt;/div&gt;
        &lt;div class="toast-actions"&gt;
            &lt;button class="btn btn-sm btn-primary"&gt;Update&lt;/button&gt;
            &lt;button class="btn btn-sm btn-ghost"&gt;Later&lt;/button&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;button class="toast-close"&gt;×&lt;/button&gt;
&lt;/div&gt;</code></div>
        </div>
    </div>
</section>

<section class="section">
    <h2 class="section-title">Toast Container</h2>
    
    <div class="glass-card">
        <div class="glass-card-header">
            <h3 class="glass-card-title">Positioning</h3>
            <p class="glass-card-subtitle">Toasts appear in a fixed container</p>
        </div>
        
        <div class="code-block">
            <div class="code-header">
                <span class="code-language">HTML</span>
            </div>
            <div class="code-content"><code>&lt;!-- Add this container to your layout --&gt;
&lt;div class="toast-container toast-container-top-right"&gt;
    &lt;!-- Toasts will be added here --&gt;
&lt;/div&gt;

&lt;!-- Available positions: --&gt;
&lt;!-- toast-container-top-right (default) --&gt;
&lt;!-- toast-container-top-left --&gt;
&lt;!-- toast-container-bottom-right --&gt;
&lt;!-- toast-container-bottom-left --&gt;
&lt;!-- toast-container-top-center --&gt;
&lt;!-- toast-container-bottom-center --&gt;</code></div>
        </div>
    </div>
</section>

<!-- Toast Container for live demos -->
<div class="toast-container toast-container-top-right">
    @foreach (var toast in activeToasts)
    {
        <div class="toast toast-@toast.Type toast-animate-in" @key="toast.Id">
            <div class="toast-icon">
                @if (toast.Type == "info")
                {
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                }
                else if (toast.Type == "success")
                {
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                }
                else if (toast.Type == "warning")
                {
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                    </svg>
                }
                else if (toast.Type == "error")
                {
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                }
            </div>
            <div class="toast-content">
                <div class="toast-title">@toast.Title</div>
                <div class="toast-message">@toast.Message</div>
            </div>
            <button class="toast-close" @onclick="() => RemoveToast(toast.Id)">×</button>
            <div class="toast-progress"></div>
        </div>
    }
</div>

@code {
    private List<ToastItem> activeToasts = new();
    private int toastCounter = 0;
    
    private async Task ShowToast(string type)
    {
        var toast = new ToastItem
        {
            Id = ++toastCounter,
            Type = type,
            Title = type switch
            {
                "info" => "Information",
                "success" => "Success!",
                "warning" => "Warning",
                "error" => "Error",
                _ => "Notification"
            },
            Message = type switch
            {
                "info" => "This is an informational message.",
                "success" => "Your action was completed successfully.",
                "warning" => "Please review this before continuing.",
                "error" => "Something went wrong. Please try again.",
                _ => "Something happened."
            }
        };
        
        activeToasts.Add(toast);
        StateHasChanged();
        
        // Auto-dismiss after 4 seconds
        await Task.Delay(4000);
        RemoveToast(toast.Id);
    }
    
    private void RemoveToast(int id)
    {
        var toast = activeToasts.FirstOrDefault(t => t.Id == id);
        if (toast != null)
        {
            activeToasts.Remove(toast);
            StateHasChanged();
        }
    }
    
    private class ToastItem
    {
        public int Id { get; set; }
        public string Type { get; set; } = "info";
        public string Title { get; set; } = "";
        public string Message { get; set; } = "";
    }
}
